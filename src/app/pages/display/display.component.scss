$green: #08CC0A;
$green-dim: rgba(8, 204, 10, 0.22);
$green-glow: rgba(8, 204, 10, 0.55);
$bg: #000000;
$surface: #141414;
$surface-2: #222222;
$text: #ffffff;
$text-muted: #b0b0b0;
$transition: 0.3s ease;

// ─── decade colour palette ──────────────────────────────
$decades: (
  decade-1: #08CC0A,
  decade-2: #00b4d8,
  decade-3: #e040fb,
  decade-4: #ff9800,
  decade-5: #f44336,
  decade-6: #26c6da,
  decade-7: #ffeb3b,
  decade-8: #ab47bc,
  decade-9: #78909c,
);

:host {
  display: block;
  height: 100vh;
  width: 100vw;
  background: $bg;
  overflow: hidden;
}

// ─── Wrapper ─────────────────────────────────────────────
.display-wrapper {
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100vw;
  background: $bg;
  color: $text;
  font-family: 'Segoe UI', system-ui, sans-serif;
}

// ─── Top bar ─────────────────────────────────────────────
.top-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.4rem 2.5rem;
  background: $surface;
  border-bottom: 2px solid rgba(255, 255, 255, 0.18);
  flex-shrink: 0;
  z-index: 10;
}

.party-badge-group {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.party-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background: $green-dim;
  border: 2px solid $green;
  border-radius: 999px;
  padding: 0.5rem 1.2rem;
  font-size: 1.3rem;
  font-weight: 600;

  &__label {
    color: $text-muted;
    font-weight: 500;
  }

  &__number {
    color: $green;
    font-size: 1.6rem;
    font-weight: 900;
  }
}

.party-type {
  display: inline-flex;
  align-items: center;
  padding: 0.5rem 1.2rem;
  background: rgba(255, 255, 255, 0.1);
  border: 2px solid rgba(255, 255, 255, 0.35);
  border-radius: 999px;
  font-size: 1.1rem;
  font-weight: 800;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: $text;
}

.party-waiting {
  font-size: 1.3rem;
  color: $text-muted;
  font-style: italic;
}

.top-actions {
  display: flex;
  align-items: center;
  gap: 1.5rem;
}

.drawn-counter {
  display: flex;
  align-items: baseline;
  gap: 0.25rem;
  font-weight: 700;

  &__value {
    font-size: 2.8rem;
    color: $green;
    font-weight: 900;
    text-shadow: 0 0 20px rgba($green, 0.6);
  }

  &__sep {
    font-size: 1.8rem;
    color: $text-muted;
  }

  &__total {
    font-size: 1.8rem;
    color: $text-muted;
  }
}

.fullscreen-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 3rem;
  height: 3rem;
  border-radius: 0.6rem;
  background: rgba(255, 255, 255, 0.08);
  border: 2px solid rgba(255, 255, 255, 0.25);
  color: $text-muted;
  cursor: pointer;
  transition: background $transition, color $transition, border-color $transition;

  svg {
    width: 1.4rem;
    height: 1.4rem;
  }

  &:hover {
    background: $green-dim;
    border-color: $green;
    color: $green;
  }
}

// ─── Main display ─────────────────────────────────────────
.main-display {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse 65% 55% at 50% 50%, rgba(8, 204, 10, 0.12), transparent 70%);
    pointer-events: none;
  }
}

// ─── Number stage ─────────────────────────────────────────
.number-stage {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2rem;
}

// Spinning rings
.number-ring {
  position: absolute;
  border-radius: 50%;
  border: 3px solid transparent;
  pointer-events: none;

  &.outer {
    width: clamp(280px, 40vmin, 520px);
    height: clamp(280px, 40vmin, 520px);
    border-top-color: rgba($green, 0.65);
    border-right-color: rgba($green, 0.3);
    animation: spin-cw 6s linear infinite;
  }

  &.inner {
    width: clamp(240px, 35vmin, 450px);
    height: clamp(240px, 35vmin, 450px);
    border-bottom-color: rgba($green, 0.5);
    border-left-color: rgba($green, 0.2);
    animation: spin-ccw 4s linear infinite;
  }
}

// Number card
.number-card {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: clamp(200px, 28vmin, 380px);
  height: clamp(200px, 28vmin, 380px);
  border-radius: 50%;
  background: $surface;
  border: 5px solid $green;
  box-shadow:
    0 0 60px rgba($green, 0.5),
    0 0 120px rgba($green, 0.2),
    inset 0 0 40px rgba(0, 0, 0, 0.5);

  @each $name, $color in $decades {
    &.#{$name} {
      border-color: $color;
      box-shadow:
        0 0 60px rgba($color, 0.55),
        0 0 120px rgba($color, 0.22),
        inset 0 0 40px rgba(0, 0, 0, 0.5);
    }
  }
}

.current-number {
  font-size: clamp(5rem, 15vmin, 13rem);
  font-weight: 900;
  color: $green;
  line-height: 1;
  letter-spacing: -0.02em;
  font-variant-numeric: tabular-nums;
  text-shadow: 0 0 40px rgba($green, 0.7);

  @each $name, $color in $decades {
    .number-card.#{$name} & {
      color: $color;
      text-shadow: 0 0 40px rgba($color, 0.75);
    }
  }
}

.number-sublabel {
  font-size: 1.2rem;
  font-weight: 700;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: $text-muted;
}

// ─── Animations ───────────────────────────────────────────
.number-stage.animating {
  .number-card {
    animation: number-pop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  .number-ring.outer {
    animation: spin-cw 6s linear infinite, ring-pulse 0.6s ease-out;
  }

  .number-ring.inner {
    animation: spin-ccw 4s linear infinite, ring-pulse 0.6s ease-out 0.1s;
  }
}

@keyframes number-pop {
  0% {
    transform: scale(0.4) rotate(-8deg);
    opacity: 0;
  }
  60% {
    transform: scale(1.08) rotate(2deg);
    opacity: 1;
  }
  100% {
    transform: scale(1) rotate(0deg);
    opacity: 1;
  }
}

@keyframes ring-pulse {
  0% { opacity: 0.2; transform: scale(0.85); }
  50% { opacity: 1; transform: scale(1.06); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes spin-cw {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes spin-ccw {
  from { transform: rotate(0deg); }
  to { transform: rotate(-360deg); }
}

// ─── Placeholder ─────────────────────────────────────────
.placeholder {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  color: $text-muted;
  animation: fade-in 0.5s ease;

  p {
    margin: 0;
    font-size: 1.6rem;
    font-weight: 600;
    color: $text;
  }

  .placeholder-hint {
    font-size: 1.1rem;
    font-weight: 400;
    color: $text-muted;
    opacity: 0.85;
  }
}

.placeholder-orb {
  width: clamp(150px, 22vmin, 260px);
  height: clamp(150px, 22vmin, 260px);
  border-radius: 50%;
  border: 3px dashed rgba($green, 0.55);
  background: radial-gradient(circle, rgba($green, 0.06), transparent);
  animation: orb-pulse 3s ease-in-out infinite;
}

@keyframes orb-pulse {
  0%, 100% { transform: scale(1); border-color: rgba($green, 0.45); }
  50% { transform: scale(1.05); border-color: rgba($green, 0.85); }
}

// ─── History ─────────────────────────────────────────────
.history {
  flex-shrink: 0;
  background: $surface;
  border-top: 2px solid rgba(255, 255, 255, 0.18);
  padding: 1rem 2.5rem 1.25rem;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease, padding 0.4s ease;

  &.visible {
    max-height: 220px;
  }
}

.history-header {
  margin-bottom: 0.75rem;
}

.history-title {
  font-size: 0.95rem;
  font-weight: 700;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: $text-muted;
}

.history-numbers {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  max-height: 130px;
  overflow-y: auto;

  &::-webkit-scrollbar {
    height: 4px;
  }
  &::-webkit-scrollbar-track {
    background: transparent;
  }
  &::-webkit-scrollbar-thumb {
    background: rgba($green, 0.45);
    border-radius: 999px;
  }
}

.hist-chip {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 2.8rem;
  height: 2.8rem;
  padding: 0 0.6rem;
  border-radius: 0.5rem;
  font-size: 1rem;
  font-weight: 800;
  background: $surface-2;
  border: 2px solid rgba(255, 255, 255, 0.12);
  color: $text-muted;
  transition: all 0.2s ease;
  font-variant-numeric: tabular-nums;

  @each $name, $color in $decades {
    &.#{$name} {
      border-color: rgba($color, 0.6);
      color: $color;
    }
  }

  &--latest {
    transform: scale(1.2);
    box-shadow: 0 0 16px rgba($green, 0.6);
    border-color: $green !important;
    color: $green !important;
    background: rgba($green, 0.15);
    animation: chip-pop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
}

@keyframes chip-pop {
  0% { transform: scale(0.7); opacity: 0; }
  100% { transform: scale(1.2); opacity: 1; }
}

@keyframes fade-in {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}


// ─── decade colour palette ──────────────────────────────
$decades: (
  decade-1: #08CC0A,
  decade-2: #00b4d8,
  decade-3: #e040fb,
  decade-4: #ff9800,
  decade-5: #f44336,
  decade-6: #26c6da,
  decade-7: #ffeb3b,
  decade-8: #ab47bc,
  decade-9: #78909c,
);

:host {
  display: block;
  height: 100vh;
  width: 100vw;
  background: $bg;
  overflow: hidden;
}

// ─── Wrapper ─────────────────────────────────────────────
.display-wrapper {
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100vw;
  background: $bg;
  color: $text;
  font-family: 'Segoe UI', system-ui, sans-serif;
}

// ─── Top bar ─────────────────────────────────────────────
.top-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 1.5rem;
  background: $surface;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  flex-shrink: 0;
  backdrop-filter: blur(8px);
  z-index: 10;
}

.party-badge-group {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.party-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  background: $green-dim;
  border: 1px solid $green;
  border-radius: 999px;
  padding: 0.3rem 0.85rem;
  font-size: 0.9rem;
  font-weight: 600;

  &__label {
    color: $text-muted;
    font-weight: 400;
  }

  &__number {
    color: $green;
    font-size: 1.1rem;
  }
}

.party-type {
  display: inline-flex;
  align-items: center;
  padding: 0.3rem 0.9rem;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 999px;
  font-size: 0.8rem;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: $text;
}

.party-waiting {
  font-size: 0.9rem;
  color: $text-muted;
  font-style: italic;
}

.top-actions {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.drawn-counter {
  display: flex;
  align-items: baseline;
  gap: 0.2rem;
  font-weight: 700;

  &__value {
    font-size: 1.5rem;
    color: $green;
  }

  &__sep {
    font-size: 1rem;
    color: $text-muted;
  }

  &__total {
    font-size: 1rem;
    color: $text-muted;
  }
}

.fullscreen-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 2.4rem;
  height: 2.4rem;
  border-radius: 0.5rem;
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: $text-muted;
  cursor: pointer;
  transition: background $transition, color $transition, border-color $transition;

  svg {
    width: 1.1rem;
    height: 1.1rem;
  }

  &:hover {
    background: $green-dim;
    border-color: $green;
    color: $green;
  }
}

// ─── Main display ─────────────────────────────────────────
.main-display {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;

  // subtle radial gradient bg
  &::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse 60% 50% at 50% 50%, rgba(8, 204, 10, 0.05), transparent 70%);
    pointer-events: none;
  }
}

// ─── Number stage ─────────────────────────────────────────
.number-stage {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 1.5rem;
}

// Spinning rings
.number-ring {
  position: absolute;
  border-radius: 50%;
  border: 2px solid transparent;
  pointer-events: none;

  &.outer {
    width: clamp(220px, 30vmin, 380px);
    height: clamp(220px, 30vmin, 380px);
    border-top-color: rgba($green, 0.3);
    border-right-color: rgba($green, 0.1);
    animation: spin-cw 6s linear infinite;
  }

  &.inner {
    width: clamp(190px, 26vmin, 330px);
    height: clamp(190px, 26vmin, 330px);
    border-bottom-color: rgba($green, 0.2);
    border-left-color: rgba($green, 0.08);
    animation: spin-ccw 4s linear infinite;
  }
}

// Number card
.number-card {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: clamp(160px, 22vmin, 280px);
  height: clamp(160px, 22vmin, 280px);
  border-radius: 50%;
  background: $surface;
  border: 3px solid $green;
  box-shadow:
    0 0 40px rgba($green, 0.2),
    0 0 80px rgba($green, 0.08),
    inset 0 0 30px rgba(0, 0, 0, 0.4);

  // Apply decade colors to border
  @each $name, $color in $decades {
    &.#{$name} {
      border-color: $color;
      box-shadow:
        0 0 40px rgba($color, 0.3),
        0 0 80px rgba($color, 0.1),
        inset 0 0 30px rgba(0, 0, 0, 0.4);
    }
  }
}

.current-number {
  font-size: clamp(4rem, 12vmin, 9rem);
  font-weight: 900;
  color: $green;
  line-height: 1;
  letter-spacing: -0.02em;
  font-variant-numeric: tabular-nums;

  // Decade colors for text
  @each $name, $color in $decades {
    .number-card.#{$name} & {
      color: $color;
      text-shadow: 0 0 30px rgba($color, 0.5);
    }
  }
}

.number-sublabel {
  font-size: 0.8rem;
  font-weight: 600;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: $text-muted;
}

// ─── Animations ───────────────────────────────────────────
.number-stage.animating {
  .number-card {
    animation: number-pop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  .number-ring.outer {
    animation: spin-cw 6s linear infinite, ring-pulse 0.6s ease-out;
  }

  .number-ring.inner {
    animation: spin-ccw 4s linear infinite, ring-pulse 0.6s ease-out 0.1s;
  }
}

@keyframes number-pop {
  0% {
    transform: scale(0.4) rotate(-8deg);
    opacity: 0;
  }
  60% {
    transform: scale(1.08) rotate(2deg);
    opacity: 1;
  }
  100% {
    transform: scale(1) rotate(0deg);
    opacity: 1;
  }
}

@keyframes ring-pulse {
  0% { opacity: 0.2; transform: scale(0.85); }
  50% { opacity: 1; transform: scale(1.06); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes spin-cw {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes spin-ccw {
  from { transform: rotate(0deg); }
  to { transform: rotate(-360deg); }
}

// ─── Placeholder ─────────────────────────────────────────
.placeholder {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.75rem;
  color: $text-muted;
  animation: fade-in 0.5s ease;

  p {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 500;
  }

  .placeholder-hint {
    font-size: 0.8rem;
    opacity: 0.6;
  }
}

.placeholder-orb {
  width: clamp(120px, 18vmin, 200px);
  height: clamp(120px, 18vmin, 200px);
  border-radius: 50%;
  border: 2px dashed rgba($green, 0.25);
  background: radial-gradient(circle, rgba($green, 0.03), transparent);
  animation: orb-pulse 3s ease-in-out infinite;
}

@keyframes orb-pulse {
  0%, 100% { transform: scale(1); border-color: rgba($green, 0.2); }
  50% { transform: scale(1.05); border-color: rgba($green, 0.5); }
}

// ─── History ─────────────────────────────────────────────
.history {
  flex-shrink: 0;
  background: $surface;
  border-top: 1px solid rgba(255, 255, 255, 0.06);
  padding: 0.75rem 1.5rem 1rem;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease, padding 0.4s ease;

  &.visible {
    max-height: 160px;
  }
}

.history-header {
  margin-bottom: 0.6rem;
}

.history-title {
  font-size: 0.7rem;
  font-weight: 700;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: $text-muted;
}

.history-numbers {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
  max-height: 90px;
  overflow-y: auto;

  &::-webkit-scrollbar {
    height: 3px;
  }
  &::-webkit-scrollbar-track {
    background: transparent;
  }
  &::-webkit-scrollbar-thumb {
    background: rgba($green, 0.3);
    border-radius: 999px;
  }
}

.hist-chip {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 2rem;
  height: 2rem;
  padding: 0 0.4rem;
  border-radius: 0.4rem;
  font-size: 0.8rem;
  font-weight: 700;
  background: $surface-2;
  border: 1px solid rgba(255, 255, 255, 0.08);
  color: $text-muted;
  transition: all 0.2s ease;
  font-variant-numeric: tabular-nums;

  // Decade colors
  @each $name, $color in $decades {
    &.#{$name} {
      border-color: rgba($color, 0.35);
      color: $color;
    }
  }

  // Latest number highlight
  &--latest {
    transform: scale(1.15);
    box-shadow: 0 0 10px rgba($green, 0.4);
    border-color: $green !important;
    color: $green !important;
    background: rgba($green, 0.12);
    animation: chip-pop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
}

@keyframes chip-pop {
  0% { transform: scale(0.7); opacity: 0; }
  100% { transform: scale(1.15); opacity: 1; }
}

@keyframes fade-in {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
